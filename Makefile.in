CXX = @CXX@
CXXFLAGS = -g --debug -Wconversion -std=c++17


all: algebra tests

algebra: build demo.o function.o
	$(CXX) $(CXXFLAGS) build/obj/demo.o build/obj/function.o -o build/algebra

tests: build tests.o base.o natural.o integer.o rational.o polynomial.o
	$(CXX) $(CXXFLAGS) build/obj/test_natural.o build/obj/base.o build/obj/natural.o -o build/test_natural
	$(CXX) $(CXXFLAGS) build/obj/test_integer.o build/obj/base.o build/obj/natural.o build/obj/integer.o -o build/test_integer
	$(CXX) $(CXXFLAGS) build/obj/test_rational.o build/obj/base.o build/obj/natural.o build/obj/integer.o build/obj/rational.o -o build/test_rational
	$(CXX) $(CXXFLAGS) build/obj/test_polynomial.o build/obj/base.o build/obj/natural.o build/obj/integer.o build/obj/rational.o build/obj/polynomial.o -o build/test_polynomial

demo.o:
	$(CXX) $(CXXFLAGS) -c src/demo.cpp -Imerge -o build/obj/demo.o

tests.o:
	$(CXX) $(CXXFLAGS) -c tests/test_natural.cpp -Imerge -o build/obj/test_natural.o
	$(CXX) $(CXXFLAGS) -c tests/test_integer.cpp -Imerge -o build/obj/test_integer.o
	$(CXX) $(CXXFLAGS) -c tests/test_rational.cpp -Imerge -o build/obj/test_rational.o
	$(CXX) $(CXXFLAGS) -c tests/test_polynomial.cpp -Imerge -o build/obj/test_polynomial.o

base.o:
	$(CXX) $(CXXFLAGS) -c merge/base.cpp -Imerge -o build/obj/base.o

natural.o:
	$(CXX) $(CXXFLAGS) -c merge/natural.cpp -Imerge -o build/obj/natural.o

integer.o:
	$(CXX) $(CXXFLAGS) -c merge/integer.cpp -Imerge -o build/obj/integer.o

rational.o:
	$(CXX) $(CXXFLAGS) -c merge/rational.cpp -Imerge -o build/obj/rational.o

polynomial.o:
	$(CXX) $(CXXFLAGS) -c merge/polynomial.cpp -Imerge -o build/obj/polynomial.o

build:
	mkdir build
	mkdir build/obj

clean:
	rm -rf build
	rm config.log
	rm config.status
